this is the add D3 branch